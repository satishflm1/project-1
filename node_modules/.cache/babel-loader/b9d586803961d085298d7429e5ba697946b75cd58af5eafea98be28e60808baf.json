{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Orders=()=>{const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{fetchOrders();},[]);const fetchOrders=async()=>{try{const response=await axios.get('http://localhost:5000/api/orders');setOrders(response.data);setLoading(false);}catch(error){console.error('Error fetching orders:',error);setError('Failed to load orders');setLoading(false);}};const handleStatusChange=async(orderId,newStatus)=>{try{await axios.patch(`http://localhost:5000/api/orders/${orderId}/status`,{status:newStatus});fetchOrders();}catch(error){console.error('Error updating order status:',error);alert('Failed to update order status');}};const getStatusColor=status=>{switch(status){case'pending':return'bg-yellow-100 text-yellow-800';case'preparing':return'bg-blue-100 text-blue-800';case'ready':return'bg-green-100 text-green-800';case'completed':return'bg-gray-100 text-gray-800';default:return'bg-gray-100 text-gray-800';}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-center p-4\",children:error});}return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-6\",children:\"Orders\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Order ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Customer\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Table\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:[\"#\",order.id]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:order.order_type}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:order.customer_name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:order.table_number||'N/A'}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[\"$\",parseFloat(order.total_amount).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(order.status)}`,children:order.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:/*#__PURE__*/_jsxs(\"select\",{value:order.status,onChange:e=>handleStatusChange(order.id,e.target.value),className:\"rounded border-gray-300 text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"preparing\",children:\"Preparing\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ready\",children:\"Ready\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completed\"})]})})]},order.id))})]})})]});};export default Orders;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Orders","orders","setOrders","loading","setLoading","error","setError","fetchOrders","response","get","data","console","handleStatusChange","orderId","newStatus","patch","status","alert","getStatusColor","className","children","map","order","id","order_type","customer_name","table_number","parseFloat","total_amount","toFixed","value","onChange","e","target"],"sources":["C:/Users/5518/work1/client/src/pages/Orders.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Orders = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  const fetchOrders = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:5000/api/orders');\r\n      setOrders(response.data);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Error fetching orders:', error);\r\n      setError('Failed to load orders');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleStatusChange = async (orderId, newStatus) => {\r\n    try {\r\n      await axios.patch(`http://localhost:5000/api/orders/${orderId}/status`, {\r\n        status: newStatus\r\n      });\r\n      fetchOrders();\r\n    } catch (error) {\r\n      console.error('Error updating order status:', error);\r\n      alert('Failed to update order status');\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'pending':\r\n        return 'bg-yellow-100 text-yellow-800';\r\n      case 'preparing':\r\n        return 'bg-blue-100 text-blue-800';\r\n      case 'ready':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'completed':\r\n        return 'bg-gray-100 text-gray-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center min-h-screen\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"text-red-500 text-center p-4\">\r\n        {error}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-6\">Orders</h1>\r\n      <div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n        <table className=\"min-w-full divide-y divide-gray-200\">\r\n          <thead className=\"bg-gray-50\">\r\n            <tr>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Order ID\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Type\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Customer\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Table\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Total\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Status\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Actions\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"bg-white divide-y divide-gray-200\">\r\n            {orders.map(order => (\r\n              <tr key={order.id}>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                  #{order.id}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                  {order.order_type}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                  {order.customer_name}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                  {order.table_number || 'N/A'}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                  ${parseFloat(order.total_amount).toFixed(2)}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                  <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(order.status)}`}>\r\n                    {order.status}\r\n                  </span>\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                  <select\r\n                    value={order.status}\r\n                    onChange={(e) => handleStatusChange(order.id, e.target.value)}\r\n                    className=\"rounded border-gray-300 text-sm\"\r\n                  >\r\n                    <option value=\"pending\">Pending</option>\r\n                    <option value=\"preparing\">Preparing</option>\r\n                    <option value=\"ready\">Ready</option>\r\n                    <option value=\"completed\">Completed</option>\r\n                  </select>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Orders; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}